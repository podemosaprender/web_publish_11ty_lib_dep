!function(){function t(){}function i(t){return o.retinaImageSuffix+t}function a(t,e){this.path=t||"",null!=e?(this.at_2x_path=e,this.perform_check=!1):(void 0!==document.createElement?((t=document.createElement("a")).href=this.path,t.pathname=t.pathname.replace(n,i),this.at_2x_path=t.href):((e=this.path.split("?"))[0]=e[0].replace(n,i),this.at_2x_path=e.join("?")),this.perform_check=!0)}function h(t){this.el=t,this.path=new a(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant(function(t){t&&e.swap()})}var e="undefined"==typeof exports?window:exports,o={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0},n=((e.Retina=t).configure=function(t){for(var e in t=null===t?{}:t)t.hasOwnProperty(e)&&(o[e]=t[e])},t.init=function(t){var a=(t=null===t?e:t).onload||function(){};t.onload=function(){for(var t,e=document.getElementsByTagName("img"),i=[],n=0;n<e.length;n+=1)(t=e[n]).getAttributeNode("data-no-retina")||i.push(new h(t));a()}},t.isRetina=function(){return 1<e.devicePixelRatio||!(!e.matchMedia||!e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches)},/\.\w+$/);(e.RetinaImagePath=a).confirmed_paths=[],a.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},a.prototype.check_2x_variant=function(e){var i,n=this;return this.is_external()?e(!1):!this.perform_check&&void 0!==this.at_2x_path&&null!==this.at_2x_path||this.at_2x_path in a.confirmed_paths?e(!0):((i=new XMLHttpRequest).open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4===i.readyState&&200<=i.status&&i.status<=399){if(o.check_mime_type){var t=i.getResponseHeader("Content-Type");if(null===t||!t.match(/^image/i))return e(!1)}return a.confirmed_paths.push(n.at_2x_path),e(!0)}return e(!1)},void i.send())},(e.RetinaImage=h).prototype.swap=function(e){void 0===e&&(e=this.path.at_2x_path);var i=this;!function t(){i.el.complete?(o.force_original_dimensions&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",e)):setTimeout(t,5)}()},t.isRetina()&&t.init(e)}();